---
author: zjmantou
title: 增量构建属性类型注解
time: 2024-07-19 周五
tags:
  - 技术
  - Gradle
---

| Annotation 注解                                                                                                   | Expected property type 预期财产类型                          | Description 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| @[Input](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Input.html)                                   | 任何 `Serializable` 类型或依赖解析结果类型                          | 简单的输入值或依赖解析结果                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| @[InputFile](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/InputFile.html)                           | `File`*                                                | 单个输入文件（不是目录）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| @[InputDirectory](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/InputDirectory.html)                 | `File`*                                                | 单个输入目录（不是文件）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| @[InputFiles](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/InputFiles.html)                         | `Iterable<File>`*                                      | 输入文件和目录的可迭代                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| @[Classpath](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Classpath.html)                           | `Iterable<File>`*                                      | 表示 Java 类路径的输入文件和目录的可迭代。这允许任务忽略对属性的不相关更改，例如相同文件的不同名称。它类似于注释属性 `@PathSensitive(RELATIVE)` 但它会忽略直接添加到类路径中的 JAR 文件的名称，并且会将文件顺序的更改视为类路径中的更改。 Gradle 将检查类路径上 jar 文件的内容，并忽略不影响类路径语义的更改（例如文件日期和条目顺序）。另请参阅[使用类路径注释]((https://docs.gradle.org/7.6/userguide/more_about_tasks.html#sec:task_input_using_classpath_annotations))。 <br>注意： `@Classpath` 注解是在 Gradle 3.2 中引入的。为了与早期的 Gradle 版本保持兼容，类路径属性还应该使用 `@InputFiles` 进行注释。                                                                                                                                                                             |
| @[CompileClasspath](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/CompileClasspath.html)             | `Iterable<File>`*                                      | 表示 Java 编译类路径的输入文件和目录的可迭代。这允许任务忽略不影响类路径中类的 API 的不相关更改。另请参阅[使用类路径注释](https://docs.gradle.org/7.6/userguide/more_about_tasks.html#sec:task_input_using_classpath_annotations)。<br>以下类型的类路径更改将被忽略：<br><br>- 更改 jar 或顶级目录的路径。<br>- 更改了时间戳和 Jars 中条目的顺序。<br>- 对资源和 Jar 清单的更改，包括添加或删除资源。<br>- 对私有类元素的更改，例如私有字段、方法和内部类。<br>- 对代码的更改，例如方法体、静态初始值设定项和字段初始值设定项（常量除外）。<br>- 对调试信息的更改，例如，对注释的更改会影响类调试信息中的行号。<br>- 对目录的更改，包括 Jars 中的目录条目。<br>    <br>`@CompileClasspath` 注解是在 Gradle 3.4 中引入的。为了与 Gradle 3.3 和 3.2 保持兼容，编译类路径属性还应该使用 `@Classpath` 进行注释。为了与 3.2 之前的 Gradle 版本兼容，该属性还应该使用 `@InputFiles` 进行注释。\| |
| @[OutputFile](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/OutputFile.html)                         | `File`*                                                | 单个输出文件（不是目录）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| @[OutputDirectory](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/OutputDirectory.html)               | `File`*                                                | 单个输出目录（不是文件）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| @[OutputFiles](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/OutputFiles.html)                       | `Map<String, File>`** or `Iterable<File>`*             | 输出文件的可迭代或映射。使用文件树会关闭任务的[缓存](https://docs.gradle.org/7.6/userguide/build_cache.html#sec:task_output_caching)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| @[OutputDirectories](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/OutputDirectories.html)           | `Map<String, File>`** or `Iterable<File>`*             | 输出目录的可迭代。使用文件树会关闭任务的[缓存](https://docs.gradle.org/7.6/userguide/build_cache.html#sec:task_output_caching)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| @[Destroys](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Destroys.html)                             | `File` or `Iterable<File>`*                            | 指定此任务删除的一个或多个文件。请注意，任务可以定义输入/输出或可破坏项，但不能同时定义两者。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| @[LocalState](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/LocalState.html)                         | `File` or `Iterable<File>`*                            | 指定代表[任务本地状态](https://docs.gradle.org/7.6/userguide/custom_tasks.html#sec:storing_incremental_task_state)的一个或多个文件。从缓存加载任务时，这些文件将被删除。                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| @[Nested](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Nested.html)                                 | 任何自定义类型                                                | 一种自定义类型，可能不会实现 `Serializable` ，但至少有一个标有此表中的注释之一的字段或属性。它甚至可能是另一个 `@Nested` 。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| @[Console](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Console.html)                               | 任何类型                                                   | 指示该属性既不是输入也不是输出。它只是以某种方式影响任务的控制台输出，例如增加或减少任务的详细程度。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| @[Internal](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Internal.html)                             | 任何类型                                                   | 指示该属性在内部使用，但既不是输入也不是输出。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| @[ReplacedBy](https://docs.gradle.org/7.6/javadoc/org/gradle/api/model/ReplacedBy.html)                         | 任何类型                                                   | 指示该属性已被另一个属性替换，并且作为输入或输出应被忽略。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| @[SkipWhenEmpty](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/SkipWhenEmpty.html)                   | `File` or `Iterable<File>`*                            | 与 `@InputFiles` 或 `@InputDirectory` 一起使用，告诉 Gradle 如果相应的文件或目录以及使用此注释声明的所有其他输入文件为空，则跳过该任务。由于使用此注释声明的所有输入文件为空而被跳过的任务将导致明显的“无源”结果。例如， `NO-SOURCE` 将在控制台输出中发出。 <br>意味着 [@Incremental](https://docs.gradle.org/7.6/userguide/more_about_tasks.html#incremental) 。                                                                                                                                                                                                                                                                                                                                     |
| @[Incremental](https://docs.gradle.org/7.6/javadoc/org/gradle/work/Incremental.html)                            | `Provider<FileSystemLocation>` <br>or `FileCollection` | 与 `@InputFiles` 或 `@InputDirectory` 一起使用，指示 Gradle 跟踪带注释的文件属性的更改，以便可以通过 @[InputChanges.getFileChanges()](https://docs.gradle.org/7.6/dsl/org.gradle.work.InputChanges.html) 查询更改。[增量任务](https://docs.gradle.org/7.6/userguide/custom_tasks.html#incremental_tasks)所需。                                                                                                                                                                                                                                                                                                                            |
| @[Optional](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Optional.html)                             | 任何类型                                                   | 与[Optional](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/Optional.htm)API 文档中列出的任何属性类型注解一起使用。此注释禁用对相应属性的验证检查。有关更多详细信息，请参阅[验证部分](https://docs.gradle.org/7.6/userguide/more_about_tasks.html#sec:task_input_output_validation)。                                                                                                                                                                                                                                                                                                                                                       |
| @[PathSensitive](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/PathSensitive.html)                   | `File` or `Iterable<File>`*                            | 与任何输入文件属性一起使用，告诉 Gradle 仅将文件路径的给定部分视为重要。例如，如果属性用 `@PathSensitive(PathSensitivity.NAME_ONLY)` 进行注释，则移动文件而不更改其内容不会使任务过时。                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| @[IgnoreEmptyDirectories](https://docs.gradle.org/7.6/javadoc/org/gradle/api/tasks/IgnoreEmptyDirectories.html) | `File` or `Iterable<File>`*                            | 与 `@InputFiles` 或 `@InputDirectory` 一起使用，指示 Gradle 仅跟踪目录内容的更改，而不跟踪目录本身的差异。例如，在目录结构中的某个位置删除、重命名或添加空目录不会使任务过时。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| @[NormalizeLineEndings](https://docs.gradle.org/7.6/javadoc/org/gradle/work/NormalizeLineEndings.html)          | `File` or `Iterable<File>`*                            | 与 `@InputFiles` 、 `@InputDirectory` 或 `@Classpath` 一起使用，指示 Gradle 在计算最新检查或构建缓存键时规范行结尾。例如，在 Unix 行结尾和 Windows 行结尾之间切换文件（反之亦然）不会使任务过时。                                                                                                                                                                                                                                                                                                                                                                                                                                                             |

